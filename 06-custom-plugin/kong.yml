_format_version: "3.0"
_transform: true

services:
  - name: go-mock-api
    url: http://go-mock-api-1:3001
    protocol: http
    host: go-mock-api-1
    port: 3001
    path: /
    connect_timeout: 60000
    write_timeout: 60000
    read_timeout: 60000
    retries: 5

routes:
  - name: api-route
    service: go-mock-api
    protocols: [http, https]
    methods: [GET, POST, PUT, PATCH, DELETE]
    paths: [/api]
    strip_path: true
    preserve_host: false

plugins:
  - name: request-validator
    route: api-route
    config:
      required_headers:
        - "X-User-ID"
        - "X-Client-Version"
      max_payload_size: 1024  # 1KB para demonstração
      rate_limit_per_minute: 5
      enable_payload_validation: true
      enable_rate_limiting: true
      rate_limit_by: "header"
      rate_limit_header: "X-User-ID"
      log_request_headers:
        - "User-Agent"
        - "X-Forwarded-For"
        - "X-Client-Version"
